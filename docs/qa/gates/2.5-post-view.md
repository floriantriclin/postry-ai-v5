# QA Gate: Story 2.5 - Vue "Post Révélé" & Dashboard Initial

**Parent Story:** [Story 2.5 : Vue "Post Révélé" & Dashboard Initial](../../stories/story-2-5-post-view.md)

## Objectif

Valider que la page d'affichage du post révélé est fonctionnelle, visuellement conforme à la spécification "Tech & Brut", et que l'expérience utilisateur est fluide après l'authentification. Ce document détaille les cas de test à exécuter pour garantir la qualité de la livraison.

---

## 1. Tests d'Authentification & d'Accès

| Test Case ID | Description | Étapes de Reproduction | Résultat Attendu |
| :--- | :--- | :--- | :--- |
| **AUTH-01** | **Route Protégée** | 1. Se déconnecter. <br> 2. Tenter d'accéder directement à l'URL `/quiz/reveal` ou à la future route du dashboard. | L'utilisateur est redirigé vers la page d'accueil (`/`). |
| **AUTH-02** | **Accès Post-Auth** | 1. Compléter le quiz et le flux d'authentification (Magic Link). | L'utilisateur est redirigé vers la page du post révélé et le contenu est affiché. |
| **AUTH-03** | **Déconnexion** | 1. Être sur la page du post révélé. <br> 2. Cliquer sur le bouton de déconnexion. | L'utilisateur est déconnecté et redirigé vers la page d'accueil (`/`). |

---

## 2. Tests UI & Design "Tech & Brut"

| Test Case ID | Description | Étapes de Reproduction | Résultat Attendu |
| :--- | :--- | :--- | :--- |
| **UI-01** | **Structure de la Carte** | 1. Afficher la page du post révélé. | - La carte a un fond blanc (`bg-white`).<br>- La carte a une bordure noire de 2px (`border-2 border-black`).<br>- Les coins de la carte ne sont pas arrondis (`rounded-none`).<br>- La carte possède une ombre dure : `box-shadow: 4px 4px 0px 0px #000`. |
| **UI-02** | **Typographie** | 1. Inspecter le texte sur la carte. | - Les métadonnées (Thème, Archétype) utilisent la police `font-mono`.<br>- Le corps du post utilise la police `font-sans` (Inter).<br>- La hiérarchie des titres et du corps est respectée. |
| **UI-03** | **Header Minimaliste** | 1. Inspecter le header de la page. | - Le logo est présent et cliquable, redirigeant vers la même page (ou le futur dashboard).<br>- Le bouton de déconnexion est présent et stylisé. |
| **UI-04** | **Responsivité** | 1. Redimensionner la fenêtre du navigateur de la largeur d'un bureau à 375px. | Le layout reste lisible, sans débordement horizontal. La carte et le texte s'adaptent correctement à la largeur de l'écran. |

---

## 3. Tests Fonctionnels & UX

| Test Case ID | Description | Étapes de Reproduction | Résultat Attendu |
| :--- | :--- | :--- | :--- |
| **FUNC-01** | **Animation de Révélation** | 1. Arriver sur la page pour la première fois après l'auth. | - Le post apparaît initialement flouté (`blur-sm`).<br>- Le flou disparaît avec une transition douce d'environ 1 seconde pour révéler le texte net. |
| **FUNC-02** | **Affichage du Contenu** | 1. Comparer le post affiché avec les données en base. | - Le texte du post est affiché intégralement.<br>- Le formatage (sauts de ligne, espaces) est préservé (`whitespace-pre-wrap`).<br>- Les métadonnées (Thème, Archétype) sont correctes. |
| **FUNC-03** | **Bouton Copier** | 1. Cliquer sur le bouton **[ COPIER LE TEXTE ]**. <br> 2. Coller le contenu dans un éditeur de texte. | - Le texte complet du post est copié dans le presse-papiers.<br>- Le label du bouton change temporairement en "COPIÉ !".<br>- Le texte collé correspond exactement au contenu du post. |
| **FUNC-04** | **Test Bouton Copier (Mobile)** | 1. Exécuter le test FUNC-03 sur un émulateur mobile ou un appareil réel. | Le comportement est identique à celui sur bureau, confirmant que les permissions de l'API Clipboard sont gérées. |

---

## 4. Tests de Gestion des États

| Test Case ID | Description | Étapes de Reproduction | Résultat Attendu |
| :--- | :--- | :--- | :--- |
| **STATE-01** | **État de Chargement** | 1. Simuler une connexion lente (via les dev tools) et charger la page. | Le `LoaderMachine` (style terminal) est affiché pendant que les données du post sont récupérées. |
| **STATE-02** | **État Vide** | 1. Manipuler la base de données pour qu'un utilisateur authentifié n'ait pas de post associé. <br> 2. Accéder à la page. | Un message "Aucun post généré" est affiché.<br>- Un bouton permettant de retourner au quiz est visible et fonctionnel. |
| **STATE-03** | **Pas de Flash de Contenu** | 1. Recharger la page plusieurs fois. | Aucun "flash" de contenu non flouté ne doit être visible avant le début de l'animation de révélation. Le contenu doit être flouté par défaut au premier rendu. |
