# Test Design: Story 1.3

Date: 2026-01-19
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 9
- Unit tests: 3 (33%) - *Heavy focus on State Machine logic*
- Integration tests: 0 (0%)
- E2E/System tests: 6 (67%)
- Priority distribution: P0: 3, P1: 4, P2: 2

## Test Scenarios by Acceptance Criteria

### AC1 & AC2: Theme Selection & Instructions

| ID | Level | Priority | Test | Justification |
| -- | ----- | -------- | ---- | ------------- |
| 1.3-E2E-001 | E2E | P1 | Verify Theme Grid renders 10 items from `themes.json` | Ensures configuration loading |
| 1.3-E2E-002 | E2E | P0 | Click Theme -> Immediate transition to Instructions | Core navigation flow |
| 1.3-E2E-003 | E2E | P2 | Verify Instruction screen content & "Start" button | Basic UI check |

### AC3, AC4, AC5: Quiz Phase 1 & 2 Logic

| ID | Level | Priority | Test | Justification |
| -- | ----- | -------- | ---- | ------------- |
| 1.3-UNIT-001 | Unit | P0 | `useReducer`: Verify `ANSWER_PHASE1` action increments index & updates history | Critical business logic (State Machine) |
| 1.3-UNIT-002 | Unit | P1 | `useReducer`: Verify transition `PHASE1` -> `TRANSITION` -> `PHASE2` | Complex state boundary check |
| 1.3-E2E-004 | E2E | P1 | Verify Progress Bar updates visually (Text: "1/6", Width changes) | UX feedback Loop |
| 1.3-E2E-005 | E2E | P1 | "Previous" button decrements index & restores previous answer state | Navigation recovery (UX-003) |
| 1.3-E2E-006 | E2E | P1 | Verify Phase 2 Progress shows percentage (e.g., "PrÃ©cision: 80%") | Specific AC requirement |

### AC6: Final Reveal

| ID | Level | Priority | Test | Justification |
| -- | ----- | -------- | ---- | ------------- |
| 1.3-E2E-007 | E2E | P0 | Complete full quiz (11 answers) -> Verify Final Reveal content | Critical Path validation ("Aha!" moment) |

### AC7 & AC8: Design & Quality

| ID | Level | Priority | Test | Justification |
| -- | ----- | -------- | ---- | ------------- |
| 1.3-E2E-008 | E2E | P1 | Visual Snapshot of "Question Card" on Mobile (320px) | Risk UX-002 (Neo-Brutalist breakage) |
| 1.3-UNIT-003 | Unit | P2 | Validate `mock-quiz.json` imports strictly against TypeScript Interfaces | Risk TECH-003 (Schema Drift) |

## Risk Coverage

| Risk ID | Covered By Scenarios |
| ------- | -------------------- |
| TECH-002 (State Logic) | 1.3-UNIT-001, 1.3-UNIT-002, 1.3-E2E-005, 1.3-E2E-007 |
| UX-002 (Mobile Layout) | 1.3-E2E-008 |
| UX-003 (Nav Confusion) | 1.3-E2E-005 |
| TECH-003 (Schema Drift) | 1.3-UNIT-003 |

## Recommended Execution Order

1. **1.3-UNIT-001 / 002** (Validate State Machine Logic first - cheapest to fix)
2. **1.3-E2E-007** (Happy Path Smoke Test)
3. **1.3-E2E-002** (Entrance Path)
4. **1.3-E2E-005** (Navigation Edge Cases)
5. **1.3-E2E-008** (Visual Polish)
