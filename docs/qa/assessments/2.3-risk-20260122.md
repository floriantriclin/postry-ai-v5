# Évaluation des Risques - Story 2.3 : Modal de Capture & Déclenchement Auth

| ID | Risque | Type | Impact (1-5) | Prob. (1-5) | Gravité (Impact x Prob) | Niveau | Mitigation QA Suggérée |
|---|---|---|---|---|---|---|---|
| R2.3.1 | **Échec de Conversion/Lead Loss** : L'envoi du Magic Link ne fonctionne pas (API `signInWithEmail` ou couche `lib/auth.ts` brisée). | Fonctionnel | 5 (Critique) | 4 (Élevée) | 20 | Très Élevé | **E2E (Playwright) :** Parcours complet de soumission d'email valide. **Intégration/Composant :** Mocking de l'appel API pour vérifier le flow UI. |
| R2.3.2 | **Mauvaise UX/Validation** : Le feedback d'erreur de validation (venant de l'API) ne s'affiche pas correctement après soumission d'un email invalide. | UX/Client | 3 (Moyen) | 3 (Moyenne) | 9 | Moyen | **Composant (RTL/Vitest) :** Mocking de l'API pour retourner une erreur de validation et vérifier que le message s'affiche. |
| R2.3.3 | **Bloqueur d'Accessibilité** : La modal n'est pas navigable au clavier (Focus Trap), ou les messages d'erreur ne sont pas annoncés par les lecteurs d'écran (manque `role="alert"`). | NFR/Accessibilité | 4 (Élevé) | 3 (Moyenne) | 12 | Élevé | **E2E/Manuels :** Vérification du Focus Trap et de la vocalisation des erreurs avec un lecteur d'écran. |
| R2.3.4 | **Dysfonctionnement Mobile** : Le modal s'affiche mal ou les zones tactiles (inputs/CTA) sont trop petites (NFR 44x44px) sur mobile. | NFR/Responsivité | 4 (Élevé) | 3 (Moyenne) | 12 | Élevé | **E2E (Playwright Mobile) :** Validation du rendu en viewport mobile. **Manuels :** Vérification du `touch target` visuellement ou par inspection. |
| R2.3.5 | **Mauvais Feedback d'État** : La modal reste bloquée en état de chargement (`soumission`) ou affiche un message de succès incorrect, forçant l'utilisateur à actualiser. | Fonctionnel/UX | 3 (Moyen) | 3 (Moyenne) | 9 | Moyen | **Composant (RTL/Vitest) :** Tester les transitions entre les états : `initial` -> `loading` -> `success` (avec message correct) ou `error`. |
| R2.3.6 | **Problème de Déclenchement** : La modal ne s'affiche pas instantanément ou ne s'affiche pas du tout lorsque l'utilisateur arrive sur le Post Flouté. | Performance/Flow | 3 (Moyen) | 2 (Basse) | 6 | Moyen | **E2E :** Assurer la visibilité immédiate de la modal après navigation vers la page cible. |
| R2.3.7 | **Contournement de la Conversion** : Un utilisateur peut fermer la modal en utilisant le bouton "retour" du navigateur et potentiellement interagir avec la page derrière. | Fonctionnel/Produit | 4 (Élevé) | 2 (Basse) | 8 | Moyen | **Décision Produit :** Risque accepté pour la Story 2.3. Une nouvelle Story sera créée pour implémenter une logique de verrouillage et mitiger ce risque. |
| R2.3.8 | **Régression : Fermeture Possible** : Contrairement aux exigences, un mécanisme de fermeture de la modal (bouton, touche `Echap`) est présent et fonctionnel. | Fonctionnel/Régression | 5 (Critique) | 2 (Basse) | 10 | Moyen | **E2E/Manuels :** Vérifier l'absence de bouton de fermeture et s'assurer que la touche `Echap` n'a aucun effet. |

**Niveaux de Gravité:**
*   1-6: Faible
*   7-12: Moyen
*   13-20: Élevé
